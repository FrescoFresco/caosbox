<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CaosBox â€¢ beta</title>

    <!-- Necesario para GitHub Pages -->
    <base href="$FLUTTER_BASE_HREF" />

    <!-- Renderer -->
    <meta name="flutter-web-renderer" content="canvaskit" />
    <meta name="flutter-web-auto-detect" content="false" />

    <!-- Cargar runtime + bootstrap (define _flutter.buildConfig) -->
    <script src="flutter.js" defer></script>
    <script src="flutter_bootstrap.js" defer></script>
  </head>
  <body>
    <script defer>
      window.addEventListener('load', async () => {
        const loader = window._flutter?.loader;
        const cfg = window._flutter?.buildConfig;
        if (!loader || !cfg) {
          document.body.textContent = 'Error arrancando la app (bootstrap no disponible).';
          return;
        }
        // Dejar que registre el SW por defecto (offline ok)
        const engine = await loader.load();
        await engine.runApp();
      });
    </script>
  </body>
</html>
