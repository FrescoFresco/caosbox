<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CaosBox â€¢ beta</title>
    <base href="$FLUTTER_BASE_HREF" />
    <meta name="flutter-web-renderer" content="canvaskit" />
    <meta name="flutter-web-auto-detect" content="false" />
    <script src="flutter.js" defer></script>
    <script src="flutter_bootstrap.js" defer></script>
  </head>
  <body>
    <script defer>
      window.addEventListener('load', function () {
        if (navigator.serviceWorker?.getRegistrations) {
          navigator.serviceWorker.getRegistrations().then(rs => rs.forEach(r => r.unregister()));
        }
        const loader = window._flutter?.loader;
        const cfg = window._flutter?.buildConfig;
        if (!loader || !cfg) { document.body.textContent = 'Bootstrap no disponible.'; return; }
        loader.load({ serviceWorker: { strategy: 'none' } })
          .then(engine => engine.runApp())
          .catch(err => { document.body.textContent = 'Error: ' + (err?.message || err); });
      });
    </script>
  </body>
</html>
